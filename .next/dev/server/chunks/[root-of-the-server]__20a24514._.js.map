{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Younes/younes-translator/lib/supabase.js"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\r\n\r\nconst URL = process.env.NEXT_PUBLIC_SUPABASE_URL;\r\nconst ANON = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;\r\nconst SERVICE = process.env.SUPABASE_SERVICE_ROLE_KEY || '';\r\n\r\nexport const supabase = createClient(URL, ANON); // safe for client\r\nexport const supabaseAdmin = SERVICE ? createClient(URL, SERVICE) : null; // server-only\r\n"],"names":[],"mappings":";;;;;;AAAA;;AAEA,MAAM;AACN,MAAM;AACN,MAAM,UAAU,QAAQ,GAAG,CAAC,yBAAyB,IAAI;AAElD,MAAM,WAAW,IAAA,iKAAY,EAAC,KAAK,OAAO,kBAAkB;AAC5D,MAAM,gBAAgB,UAAU,IAAA,iKAAY,EAAC,KAAK,WAAW,MAAM,cAAc","debugId":null}},
    {"offset": {"line": 39, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Younes/younes-translator/pages/api/submitCorrection.js"],"sourcesContent":["import { supabaseAdmin } from \"../../lib/supabase\";\r\n\r\nfunction normalize(s = \"\") {\r\n  return s.trim().toLowerCase().replace(/\\s+/g, ' ');\r\n}\r\n\r\nexport default async function handler(req, res) {\r\n  if (req.method !== \"POST\") return res.status(405).json({ error: \"Method not allowed\" });\r\n\r\n  const { original, user_translation } = req.body;\r\n  if (!original || !user_translation) return res.status(400).json({ error: \"Missing fields\" });\r\n\r\n  try {\r\n    const normalizedOriginal = normalize(original);\r\n    const normalizedTranslation = user_translation.trim();\r\n\r\n    const { data, error } = await supabaseAdmin\r\n      .from(\"pendingcorrection\")\r\n      .insert([{ original: normalizedOriginal, user_translation: normalizedTranslation }])\r\n      .select();\r\n\r\n    if (error) throw error;\r\n\r\n    res.status(200).json({ success: true, row: data?.[0] ?? null });\r\n  } catch (err) {\r\n    console.error(err);\r\n    res.status(500).json({ error: err.message });\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,SAAS,UAAU,IAAI,EAAE;IACvB,OAAO,EAAE,IAAI,GAAG,WAAW,GAAG,OAAO,CAAC,QAAQ;AAChD;AAEe,eAAe,QAAQ,GAAG,EAAE,GAAG;IAC5C,IAAI,IAAI,MAAM,KAAK,QAAQ,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;QAAE,OAAO;IAAqB;IAErF,MAAM,EAAE,QAAQ,EAAE,gBAAgB,EAAE,GAAG,IAAI,IAAI;IAC/C,IAAI,CAAC,YAAY,CAAC,kBAAkB,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;QAAE,OAAO;IAAiB;IAE1F,IAAI;QACF,MAAM,qBAAqB,UAAU;QACrC,MAAM,wBAAwB,iBAAiB,IAAI;QAEnD,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,yHAAa,CACxC,IAAI,CAAC,qBACL,MAAM,CAAC;YAAC;gBAAE,UAAU;gBAAoB,kBAAkB;YAAsB;SAAE,EAClF,MAAM;QAET,IAAI,OAAO,MAAM;QAEjB,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,SAAS;YAAM,KAAK,MAAM,CAAC,EAAE,IAAI;QAAK;IAC/D,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC;QACd,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,OAAO,IAAI,OAAO;QAAC;IAC5C;AACF","debugId":null}}]
}