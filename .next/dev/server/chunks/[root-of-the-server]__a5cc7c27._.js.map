{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Younes/younes-translator/lib/supabase.js"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\r\n\r\nconst URL = process.env.NEXT_PUBLIC_SUPABASE_URL;\r\nconst ANON = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;\r\nconst SERVICE = process.env.SUPABASE_SERVICE_ROLE_KEY || '';\r\n\r\nexport const supabase = createClient(URL, ANON); // safe for client\r\nexport const supabaseAdmin = SERVICE ? createClient(URL, SERVICE) : null; // server-only\r\n"],"names":[],"mappings":";;;;;;AAAA;;AAEA,MAAM;AACN,MAAM;AACN,MAAM,UAAU,QAAQ,GAAG,CAAC,yBAAyB,IAAI;AAElD,MAAM,WAAW,IAAA,iKAAY,EAAC,KAAK,OAAO,kBAAkB;AAC5D,MAAM,gBAAgB,UAAU,IAAA,iKAAY,EAAC,KAAK,WAAW,MAAM,cAAc","debugId":null}},
    {"offset": {"line": 39, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Younes/younes-translator/pages/api/adminAction.js"],"sourcesContent":["import { supabaseAdmin } from \"../../lib/supabase\";\r\n\r\nfunction normalize(s = \"\") {\r\n  return s.trim().toLowerCase().replace(/\\s+/g, ' ');\r\n}\r\n\r\nexport default async function handler(req, res) {\r\n  if (req.method !== \"POST\") return res.status(405).json({ error: \"Method not allowed\" });\r\n\r\n  const { password, action, item } = req.body;\r\n  if (password !== \"Younesgdom\") return res.status(401).json({ error: \"Unauthorized\" });\r\n\r\n  if (!action || !item) return res.status(400).json({ error: \"Missing action or item\" });\r\n\r\n  try {\r\n    const normalizedOriginal = normalize(item.original);\r\n    const normalizedTranslation = item.user_translation.trim();\r\n\r\n    if (action === \"approve\") {\r\n      await supabaseAdmin\r\n        .from(\"pendingcorrection\")\r\n        .delete()\r\n        .match({ original: normalizedOriginal, user_translation: normalizedTranslation });\r\n\r\n      await supabaseAdmin\r\n        .from(\"approvedcorrection\")\r\n        .insert([{ original: normalizedOriginal, user_translation: normalizedTranslation }]);\r\n\r\n      return res.status(200).json({ success: true });\r\n\r\n    } else if (action === \"reject\") {\r\n      await supabaseAdmin\r\n        .from(\"pendingcorrection\")\r\n        .delete()\r\n        .match({ original: normalizedOriginal, user_translation: normalizedTranslation });\r\n\r\n      return res.status(200).json({ success: true });\r\n    } else {\r\n      return res.status(400).json({ error: \"Unknown action\" });\r\n    }\r\n\r\n  } catch (err) {\r\n    console.error(err);\r\n    res.status(500).json({ error: err.message });\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,SAAS,UAAU,IAAI,EAAE;IACvB,OAAO,EAAE,IAAI,GAAG,WAAW,GAAG,OAAO,CAAC,QAAQ;AAChD;AAEe,eAAe,QAAQ,GAAG,EAAE,GAAG;IAC5C,IAAI,IAAI,MAAM,KAAK,QAAQ,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;QAAE,OAAO;IAAqB;IAErF,MAAM,EAAE,QAAQ,EAAE,MAAM,EAAE,IAAI,EAAE,GAAG,IAAI,IAAI;IAC3C,IAAI,aAAa,cAAc,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;QAAE,OAAO;IAAe;IAEnF,IAAI,CAAC,UAAU,CAAC,MAAM,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;QAAE,OAAO;IAAyB;IAEpF,IAAI;QACF,MAAM,qBAAqB,UAAU,KAAK,QAAQ;QAClD,MAAM,wBAAwB,KAAK,gBAAgB,CAAC,IAAI;QAExD,IAAI,WAAW,WAAW;YACxB,MAAM,yHAAa,CAChB,IAAI,CAAC,qBACL,MAAM,GACN,KAAK,CAAC;gBAAE,UAAU;gBAAoB,kBAAkB;YAAsB;YAEjF,MAAM,yHAAa,CAChB,IAAI,CAAC,sBACL,MAAM,CAAC;gBAAC;oBAAE,UAAU;oBAAoB,kBAAkB;gBAAsB;aAAE;YAErF,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;gBAAE,SAAS;YAAK;QAE9C,OAAO,IAAI,WAAW,UAAU;YAC9B,MAAM,yHAAa,CAChB,IAAI,CAAC,qBACL,MAAM,GACN,KAAK,CAAC;gBAAE,UAAU;gBAAoB,kBAAkB;YAAsB;YAEjF,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;gBAAE,SAAS;YAAK;QAC9C,OAAO;YACL,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;gBAAE,OAAO;YAAiB;QACxD;IAEF,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC;QACd,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,OAAO,IAAI,OAAO;QAAC;IAC5C;AACF","debugId":null}}]
}