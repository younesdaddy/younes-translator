{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Younes/younes-translator/pages/api/translate.js"],"sourcesContent":["import fs from \"fs\";\r\nimport path from \"path\";\r\nimport translate from \"google-translate-api-x\";\r\n\r\nexport default async function handler(req, res) {\r\n  try {\r\n    const { text, target } = req.query || {};\r\n    if (!text || !target) {\r\n      return res.status(400).json({ translation: null, error: \"Missing text or target\" });\r\n    }\r\n\r\n    const idiomsPath = path.join(process.cwd(), \"data/idioms.json\");\r\n    const dictPath = path.join(process.cwd(), \"data/dictionary.json\");\r\n\r\n    const idioms = JSON.parse(fs.readFileSync(idiomsPath, \"utf8\"));\r\n    const dictionary = JSON.parse(fs.readFileSync(dictPath, \"utf8\"));\r\n\r\n    const lowerText = text.toLowerCase();\r\n\r\n    // 1️⃣ Check idioms first\r\n    if (idioms[lowerText]) {\r\n      return res.status(200).json({ translation: idioms[lowerText] });\r\n    }\r\n\r\n    // 2️⃣ Check dictionary\r\n    if (dictionary[lowerText]) {\r\n      return res.status(200).json({ translation: dictionary[lowerText] });\r\n    }\r\n\r\n    // 3️⃣ Fallback to Google Translate\r\n    const result = await translate(String(text), { to: String(target) });\r\n    const translated = result?.text ?? null;\r\n\r\n    if (!translated) {\r\n      return res.status(500).json({ translation: null, error: \"No translation produced\" });\r\n    }\r\n\r\n    return res.status(200).json({ translation: translated });\r\n  } catch (err) {\r\n    console.error(\"Translate API error:\", err && (err.message ? err.message : err));\r\n    return res.status(500).json({\r\n      translation: null,\r\n      error: \"Translate failed: \" + (err && err.message ? err.message : String(err))\r\n    });\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEe,eAAe,QAAQ,GAAG,EAAE,GAAG;IAC5C,IAAI;QACF,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,GAAG,IAAI,KAAK,IAAI,CAAC;QACvC,IAAI,CAAC,QAAQ,CAAC,QAAQ;YACpB,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;gBAAE,aAAa;gBAAM,OAAO;YAAyB;QACnF;QAEA,MAAM,aAAa,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI;QAC5C,MAAM,WAAW,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI;QAE1C,MAAM,SAAS,KAAK,KAAK,CAAC,wGAAE,CAAC,YAAY,CAAC,YAAY;QACtD,MAAM,aAAa,KAAK,KAAK,CAAC,wGAAE,CAAC,YAAY,CAAC,UAAU;QAExD,MAAM,YAAY,KAAK,WAAW;QAElC,yBAAyB;QACzB,IAAI,MAAM,CAAC,UAAU,EAAE;YACrB,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;gBAAE,aAAa,MAAM,CAAC,UAAU;YAAC;QAC/D;QAEA,uBAAuB;QACvB,IAAI,UAAU,CAAC,UAAU,EAAE;YACzB,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;gBAAE,aAAa,UAAU,CAAC,UAAU;YAAC;QACnE;QAEA,mCAAmC;QACnC,MAAM,SAAS,MAAM,IAAA,kKAAS,EAAC,OAAO,OAAO;YAAE,IAAI,OAAO;QAAQ;QAClE,MAAM,aAAa,QAAQ,QAAQ;QAEnC,IAAI,CAAC,YAAY;YACf,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;gBAAE,aAAa;gBAAM,OAAO;YAA0B;QACpF;QAEA,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,aAAa;QAAW;IACxD,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC,wBAAwB,OAAO,CAAC,IAAI,OAAO,GAAG,IAAI,OAAO,GAAG,GAAG;QAC7E,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAC1B,aAAa;YACb,OAAO,uBAAuB,CAAC,OAAO,IAAI,OAAO,GAAG,IAAI,OAAO,GAAG,OAAO,IAAI;QAC/E;IACF;AACF","debugId":null}}]
}