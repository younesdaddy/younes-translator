{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Younes/younes-translator/lib/supabase.js"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\r\n\r\nconst URL = process.env.NEXT_PUBLIC_SUPABASE_URL;\r\nconst ANON = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;\r\nconst SERVICE = process.env.SUPABASE_SERVICE_ROLE_KEY || '';\r\n\r\nexport const supabase = createClient(URL, ANON); // safe for client\r\nexport const supabaseAdmin = SERVICE ? createClient(URL, SERVICE) : null; // server-only\r\n"],"names":[],"mappings":";;;;;;AAAA;;AAEA,MAAM;AACN,MAAM;AACN,MAAM,UAAU,QAAQ,GAAG,CAAC,yBAAyB,IAAI;AAElD,MAAM,WAAW,IAAA,iKAAY,EAAC,KAAK,OAAO,kBAAkB;AAC5D,MAAM,gBAAgB,UAAU,IAAA,iKAAY,EAAC,KAAK,WAAW,MAAM,cAAc","debugId":null}},
    {"offset": {"line": 27, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Younes/younes-translator/pages/admin.js"],"sourcesContent":["import { useEffect, useState } from \"react\"\r\nimport { supabase } from \"../lib/supabase\"\r\n\r\nexport default function Admin() {\r\n  const [password, setPassword] = useState(\"\")\r\n  const [authorized, setAuthorized] = useState(false)\r\n  const [pending, setPending] = useState([])\r\n\r\n  const checkPassword = () => {\r\n    if (password === \"Younesgdom\") setAuthorized(true)\r\n    else alert(\"Wrong password!\")\r\n  }\r\n\r\n  const fetchPending = async () => {\r\n    let { data, error } = await supabase\r\n      .from(\"pendingcorrection\")\r\n      .select(\"*\")\r\n    if (error) console.log(error)\r\n    else setPending(data || [])\r\n  }\r\n\r\n  useEffect(() => { if (authorized) fetchPending() }, [authorized])\r\n\r\n   const approve = async (item) => {\r\n    try {\r\n      const res = await fetch(\"/api/adminAction\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ password, action: \"approve\", item })\r\n      });\r\n      const data = await res.json();\r\n      if (!res.ok) throw new Error(data?.error || \"Action failed\");\r\n      fetchPending();\r\n    } catch (err) {\r\n      console.error(\"approve error:\", err);\r\n      alert(\"Error: \" + (err.message || err));\r\n    }\r\n  }\r\n\r\n\r\n  const reject = async (item) => {\r\n    try {\r\n      const res = await fetch(\"/api/adminAction\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ password, action: \"reject\", item })\r\n      });\r\n      const data = await res.json();\r\n      if (!res.ok) throw new Error(data?.error || \"Action failed\");\r\n      fetchPending();\r\n    } catch (err) {\r\n      console.error(\"reject error:\", err);\r\n      alert(\"Error: \" + (err.message || err));\r\n    }\r\n  }\r\n\r\n  if (!authorized) {\r\n    return (\r\n      <div style={{ display:\"flex\", flexDirection:\"column\", justifyContent:\"center\", alignItems:\"center\", minHeight:\"100vh\", background:\"#f0f4f8\", fontFamily:\"'Poppins', sans-serif\", color:\"#333\" }}>\r\n        <h2 style={{ marginBottom: 20 }}>Enter Admin Password</h2>\r\n        <input\r\n          type=\"password\"\r\n          value={password}\r\n          onChange={(e) => setPassword(e.target.value)}\r\n          placeholder=\"Password\"\r\n          style={{ padding:\"10px 15px\", fontSize:16, borderRadius:8, border:\"1px solid #ccc\", width:250, marginBottom:15 }}\r\n          onKeyDown={(e) => { if(e.key===\"Enter\") checkPassword() }}\r\n        />\r\n        <button onClick={checkPassword} style={{ padding:\"10px 20px\", borderRadius:8, border:\"none\", backgroundColor:\"#4f46e5\", color:\"#fff\", fontWeight:\"bold\", cursor:\"pointer\" }}>Enter</button>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div style={{ padding:30, fontFamily:\"'Poppins', sans-serif\", background:\"#f9fafb\", minHeight:\"100vh\" }}>\r\n      <h1 style={{ color:\"#4f46e5\", marginBottom:20 }}>Pending Corrections</h1>\r\n      {pending.length === 0 && <p style={{ color:\"#555\" }}>No pending corrections</p>}\r\n      {pending.map((c,i) => (\r\n        <div key={i} style={{ marginBottom:15, border:\"1px solid #e5e7eb\", borderRadius:8, padding:15, backgroundColor:\"#fff\", boxShadow:\"0 2px 5px rgba(0,0,0,0.05)\" }}>\r\n          <p><strong>Original:</strong> {c.original}</p>\r\n          <p><strong>Correction:</strong> {c.user_translation}</p>\r\n          <button onClick={() => approve(c)} style={{ marginRight:10, padding:\"5px 10px\", borderRadius:5, border:\"none\", backgroundColor:\"#10b981\", color:\"#fff\", cursor:\"pointer\" }}>Approve</button>\r\n          <button onClick={() => reject(c)} style={{ padding:\"5px 10px\", borderRadius:5, border:\"none\", backgroundColor:\"#ef4444\", color:\"#fff\", cursor:\"pointer\" }}>Reject</button>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}