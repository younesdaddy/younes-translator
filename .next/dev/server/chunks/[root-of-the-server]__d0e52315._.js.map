{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Younes/younes-translator/lib/supabase.js"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\r\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\r\n\r\nexport const supabase = createClient(supabaseUrl, supabaseServiceKey);\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM;AACN,MAAM,qBAAqB,QAAQ,GAAG,CAAC,yBAAyB;AAEzD,MAAM,WAAW,IAAA,iKAAY,EAAC,aAAa","debugId":null}},
    {"offset": {"line": 41, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Younes/younes-translator/pages/api/translate.js"],"sourcesContent":["import { supabase } from \"../../lib/supabase\"\r\nimport translate from \"google-translate-api-x\"\r\n\r\nexport default async function handler(req, res) {\r\n  try {\r\n    const { text, target } = req.query || {}\r\n    if (!text || !target) return res.status(400).json({ translation:null, error:\"Missing text or target\" })\r\n\r\n    const lowerText = text.toLowerCase()\r\n\r\n    // Check approvedCorrection table first\r\n    const { data: approved, error: approvedError } = await supabase\r\n      .from(\"approvedCorrection\")\r\n      .select(\"*\")\r\n      .eq(\"original\", lowerText)\r\n      .limit(1)\r\n\r\n    if (approvedError) console.error(\"Supabase approvedCorrection error:\", approvedError)\r\n\r\n    if (approved && approved.length > 0) {\r\n      return res.status(200).json({ translation: approved[0].user_translation })\r\n    }\r\n\r\n    // Fallback to Google Translate\r\n    const result = await translate(String(text), { to: String(target) })\r\n    const translated = result?.text ?? null\r\n\r\n    if (!translated) return res.status(500).json({ translation:null, error:\"No translation produced\" })\r\n\r\n    return res.status(200).json({ translation })\r\n  } catch (err) {\r\n    console.error(\"Translate API error:\", err)\r\n    return res.status(500).json({ translation:null, error:\"Translate failed: \"+(err?.message||String(err)) })\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEe,eAAe,QAAQ,GAAG,EAAE,GAAG;IAC5C,IAAI;QACF,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,GAAG,IAAI,KAAK,IAAI,CAAC;QACvC,IAAI,CAAC,QAAQ,CAAC,QAAQ,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,aAAY;YAAM,OAAM;QAAyB;QAErG,MAAM,YAAY,KAAK,WAAW;QAElC,uCAAuC;QACvC,MAAM,EAAE,MAAM,QAAQ,EAAE,OAAO,aAAa,EAAE,GAAG,MAAM,oHAAQ,CAC5D,IAAI,CAAC,sBACL,MAAM,CAAC,KACP,EAAE,CAAC,YAAY,WACf,KAAK,CAAC;QAET,IAAI,eAAe,QAAQ,KAAK,CAAC,sCAAsC;QAEvE,IAAI,YAAY,SAAS,MAAM,GAAG,GAAG;YACnC,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;gBAAE,aAAa,QAAQ,CAAC,EAAE,CAAC,gBAAgB;YAAC;QAC1E;QAEA,+BAA+B;QAC/B,MAAM,SAAS,MAAM,IAAA,kKAAS,EAAC,OAAO,OAAO;YAAE,IAAI,OAAO;QAAQ;QAClE,MAAM,aAAa,QAAQ,QAAQ;QAEnC,IAAI,CAAC,YAAY,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,aAAY;YAAM,OAAM;QAA0B;QAEjG,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE;QAAY;IAC5C,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC,wBAAwB;QACtC,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,aAAY;YAAM,OAAM,uBAAqB,CAAC,KAAK,WAAS,OAAO,IAAI;QAAE;IACzG;AACF","debugId":null}}]
}