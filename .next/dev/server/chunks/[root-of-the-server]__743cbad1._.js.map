{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///H:/younes-translator/pages/api/approveCorrection.js"],"sourcesContent":["import fs from \"fs\";\r\nimport path from \"path\";\r\n\r\nexport default function handler(req, res) {\r\n  if (req.method !== \"POST\") return res.status(405).json({ error: \"Method not allowed\" });\r\n\r\n  const { original, user_translation } = req.body;\r\n  if (!original || !user_translation) return res.status(400).json({ error: \"Missing data\" });\r\n\r\n  const pendingPath = path.join(process.cwd(), \"data\", \"pendingCorrections.json\");\r\n  const approvedPath = path.join(process.cwd(), \"data\", \"approvedCorrections.json\");\r\n\r\n  let pending = fs.existsSync(pendingPath)\r\n    ? JSON.parse(fs.readFileSync(pendingPath, \"utf8\"))\r\n    : [];\r\n\r\n  pending = pending.filter(p => !(p.original === original && p.user_translation === user_translation));\r\n  fs.writeFileSync(pendingPath, JSON.stringify(pending, null, 2));\r\n\r\n  let approved = fs.existsSync(approvedPath)\r\n    ? JSON.parse(fs.readFileSync(approvedPath, \"utf8\"))\r\n    : [];\r\n    \r\n  approved.push({ original, user_translation });\r\n  fs.writeFileSync(approvedPath, JSON.stringify(approved, null, 2));\r\n\r\n  res.status(200).json({ success: true });\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEe,SAAS,QAAQ,GAAG,EAAE,GAAG;IACtC,IAAI,IAAI,MAAM,KAAK,QAAQ,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;QAAE,OAAO;IAAqB;IAErF,MAAM,EAAE,QAAQ,EAAE,gBAAgB,EAAE,GAAG,IAAI,IAAI;IAC/C,IAAI,CAAC,YAAY,CAAC,kBAAkB,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;QAAE,OAAO;IAAe;IAExF,MAAM,cAAc,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,QAAQ;IACrD,MAAM,eAAe,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,QAAQ;IAEtD,IAAI,UAAU,wGAAE,CAAC,UAAU,CAAC,eACxB,KAAK,KAAK,CAAC,wGAAE,CAAC,YAAY,CAAC,aAAa,WACxC,EAAE;IAEN,UAAU,QAAQ,MAAM,CAAC,CAAA,IAAK,CAAC,CAAC,EAAE,QAAQ,KAAK,YAAY,EAAE,gBAAgB,KAAK,gBAAgB;IAClG,wGAAE,CAAC,aAAa,CAAC,aAAa,KAAK,SAAS,CAAC,SAAS,MAAM;IAE5D,IAAI,WAAW,wGAAE,CAAC,UAAU,CAAC,gBACzB,KAAK,KAAK,CAAC,wGAAE,CAAC,YAAY,CAAC,cAAc,WACzC,EAAE;IAEN,SAAS,IAAI,CAAC;QAAE;QAAU;IAAiB;IAC3C,wGAAE,CAAC,aAAa,CAAC,cAAc,KAAK,SAAS,CAAC,UAAU,MAAM;IAE9D,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;QAAE,SAAS;IAAK;AACvC","debugId":null}}]
}